<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:views="clr-namespace:BankSystem.UI.Views"
             xmlns:controls="clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls.DataGrid"
             x:Class="BankSystem.UI.Views.AutoPayView">
  
  <ScrollViewer>
    <StackPanel Margin="32" Spacing="24">
      
      <!-- Header con estilo ATH MÃ³vil -->
      <Border Background="#002855" 
              CornerRadius="16" 
              Padding="32,24"
              BoxShadow="0 4 16 0 #22000000">
        <StackPanel Spacing="8">
          <StackPanel Orientation="Horizontal" Spacing="12">
            <Border Background="#FF6600" 
                    CornerRadius="12" 
                    Width="48" 
                    Height="48" 
                    Padding="10">
              <TextBlock Text="ðŸ”„" 
                         FontSize="24" 
                         HorizontalAlignment="Center" 
                         VerticalAlignment="Center"/>
            </Border>
            <StackPanel VerticalAlignment="Center" Spacing="4">
              <TextBlock Text="Pagos AutomÃ¡ticos" 
                         FontSize="24" 
                         FontWeight="Bold" 
                         Foreground="White"/>
              <TextBlock Text="Programa y gestiona pagos recurrentes" 
                         FontSize="13" 
                         Foreground="#94A3B8"/>
            </StackPanel>
          </StackPanel>
        </StackPanel>
      </Border>

      <!-- Tabla de pagos programados -->
      <Border Background="White" 
              CornerRadius="16" 
              Padding="24"
              BoxShadow="0 2 12 0 #11000000">
        <StackPanel Spacing="16">
          
          <StackPanel Orientation="Horizontal" Spacing="12">
            <Border Background="#DBEAFE" CornerRadius="8" Width="40" Height="40" Padding="8">
              <TextBlock Text="ðŸ“‹" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Border>
            <StackPanel VerticalAlignment="Center" Spacing="2">
              <TextBlock Text="Pagos Programados" 
                         FontSize="18" 
                         FontWeight="Bold" 
                         Foreground="#1E293B"/>
              <TextBlock Text="Administra tus pagos automÃ¡ticos activos" 
                         FontSize="12" 
                         Foreground="#64748B"/>
            </StackPanel>
          </StackPanel>

          <Border BorderBrush="#E2E8F0" 
                  BorderThickness="1" 
                  CornerRadius="8"
                  Background="#F8FAFC">
            <controls:DataGrid ItemsSource="{Binding Payments}" 
                               AutoGenerateColumns="True" 
                               SelectedItem="{Binding SelectedPayment}" 
                               MinHeight="220"
                               MaxHeight="350"
                               Background="Transparent"
                               BorderThickness="0"
                               GridLinesVisibility="Horizontal"/>
          </Border>

          <!-- Botones de acciÃ³n -->
          <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
            <Button Grid.Column="0"
                    Content="â–¶ï¸ Ejecutar Hoy" 
                    Command="{Binding ExecuteTodayCommand}"
                    Height="48"
                    FontSize="14"
                    FontWeight="SemiBold"
                    CornerRadius="10"
                    Background="#10B981"
                    Foreground="White"
                    BorderThickness="0"/>
            
            <Button Grid.Column="1"
                    Content="âŒ Cancelar Pago" 
                    Command="{Binding CancelCommand}"
                    Height="48"
                    FontSize="14"
                    FontWeight="SemiBold"
                    CornerRadius="10"
                    Background="#EF4444"
                    Foreground="White"
                    BorderThickness="0"/>
          </Grid>

          <!-- Mensaje de estado -->
          <Border Background="#FEF3C7" 
                  BorderBrush="#FCD34D" 
                  BorderThickness="1" 
                  CornerRadius="8" 
                  Padding="12"
                  IsVisible="{Binding Status, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
            <StackPanel Orientation="Horizontal" Spacing="8">
              <TextBlock Text="ðŸ’¬" FontSize="16" VerticalAlignment="Center"/>
              <TextBlock Text="{Binding Status}" 
                         TextWrapping="Wrap" 
                         FontSize="13"
                         Foreground="#92400E"
                         VerticalAlignment="Center"/>
            </StackPanel>
          </Border>

        </StackPanel>
      </Border>

      <!-- Wizard para crear nuevo pago -->
      <Border Background="White" 
              CornerRadius="16" 
              Padding="24"
              BoxShadow="0 2 12 0 #11000000">
        <StackPanel Spacing="16">
          
          <StackPanel Orientation="Horizontal" Spacing="12">
            <Border Background="#D1FAE5" CornerRadius="8" Width="40" Height="40" Padding="8">
              <TextBlock Text="âž•" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Border>
            <StackPanel VerticalAlignment="Center" Spacing="2">
              <TextBlock Text="Programar Nuevo Pago" 
                         FontSize="18" 
                         FontWeight="Bold" 
                         Foreground="#1E293B"/>
              <TextBlock Text="Configura un nuevo pago automÃ¡tico" 
                         FontSize="12" 
                         Foreground="#64748B"/>
            </StackPanel>
          </StackPanel>

          <views:AutoPayWizard DataContext="{Binding Wizard}"/>
          
        </StackPanel>
      </Border>

    </StackPanel>
  </ScrollViewer>
  
</UserControl>
